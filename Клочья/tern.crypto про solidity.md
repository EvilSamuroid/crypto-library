# tern.crypto про solidity
- [Оригинальный пост](https://t.me/terncrypto/805)
---

Наконец-то попробовал сделать свой первый контракт. Для начала решил взять за пример disperse.app и чутка его изменить.
Сейчас используя disperse, вы указываете сумму перевода для каждого кошелька. Как мне кажется намного логичнее было бы указывать одно число, которое нужно для всех кошельков. Это я и попробовал сделать, вроде бы получилось. Да, без сайта пользоваться им не совсем удобно, но все же решил просто сделать пост, вдруг это будет кому-то интересно.

Контракт: 0xe7413346ffdd49384b2ed421196dc5a08a6a0b52
[Ссылка на контракт](https://bscscan.com/address/0xe7413346ffdd49384b2ed421196dc5a08a6a0b52)
Кто захочет — тот разберется.

---
- [оригинальный пост](https://t.me/terncrypto/570)

Моя первая попытка была совсем простой. Я просто хотел изменить контракт disperse.app. Сегодня же я с вами поделюсь, как можно творить реальную грязь на NFT-сейлах

Сейчас почти на всех NFT-сейлах все выкупается ботами. Есть много разных способов, как сделать такого бота. Давайте я вам расскажу основные принципы.

Способы старта сейла:
1. С отправкой транзакции админа контракта, по типу setSaleState, toggleSale.
После того как эта транзакция исполняется в блоке, все транзакции после нее, отправленные на покупку будут успешны, а все что до нее зафейлены.
Под этот способ ботоводы подключается к WebSocket-у RPC и читают весь mem-pool из транзакций которые летят в блокчейне.
Как только они видят транзакцию от создателя, которая начинает сейл, боты начинают подставлять свои транзакции с такими же GWEI, чтобы лежать в блоке сразу же после этой транзакции(если поставить GWEI выше, то вы будете лежать в блоке перед этой транзакцией, соответственно сейл еще не начался)
Пример такого сейла:
- [Контракт Planktoons](https://etherscan.io/address/0xa411c5fbf61dde466ed9b1f0120058231aa0a509)
- [Тот самый блок с транзакцией](https://etherscan.io/txs?block=14204420&p=3)
Как вы можете заметить, все транзакции отправленные на покупку до Set Public Sale от овнеры были зафейлены, т.к. их гвей выше чем у этой транзакции. А все что после успешны.

2. С опр. времени блока (block.timestamp)
Сейл становится активным автоматически без каких-либо транзакций от админов по наступлении опр. времени. В этом случае боты либо проверяют estimateGas либо же время у текущего последнего блока.
Пример такого сейла:
- [Контракт KaraFuru](https://etherscan.io/address/0xd2f668a8461d6761115daf8aeb3cdf5f40c532c6#code)
- [Блок с началом сейла](https://etherscan.io/block/14146408)Если вы пролистаете в прошлый блок и посмотрите транзакции, которые находятся в нем, то увидете что все они были зафейлены, т.к. block.timestamp еще был меньше старта сейла.

Есть еще и другие способы, но сейчас я затронул самые популярные.

Чаще всего админы таких сейлов используют именно первый способ. Обычные люди и простые боты начинают отправлять транзакции по одной или даже сразу несколько. Однако есть способы быть быстрее и умнее.

За последнюю неделю такое происходило как минимум на 2 сейлах:
- [HeroGalaxy транзакция](https://etherscan.io/tx/0x9ce22ff3221994ab4bdc7a5064cce688cc6d6ef995a0edb52ddd3a36fb3e07ff)
- [Love Addicted Girls транзакция](https://etherscan.io/tx/0xf46e01ecb5b53fd77b617775df2076361f265258f8b2ff75f3e0652c5a20cb02)

Как вы видите, пользователь за 1 транзакцию покупает сразу очень много NFT, а сама транзакция идет вообще на другой контракт.

И, о да!! Я попробовал сделать также и у меня получилось :)
- [Ссылочка на код](https://gist.github.com/frendri/32aa6f43ef8cea8b2ea61dc67e43a700)
- [Транзакция на покупку за ETH](https://rinkeby.etherscan.io/tx/0x31744ae687f5b7612323a5e78b4a9d93d398096631a458e94583b1ec64d5cd5b)
- [Транзакция на покупку за ERC20 токен](https://rinkeby.etherscan.io/tx/0x11d2c58691e8b8d90d3771f15ce8ca971c3309826214296cce794bf1da3f5558)

В целом весь этот процесс оказался очень даже легким, единственное что меня не устраивает, это то что сейчас для каждого контракта NFT, я должен создавать свой новый и изменять код под то, какую функцию нужно вызвать.
Хотя я уверен можно сделать и так, чтобы метод на покупку передавался прямо в функцию и все работало, но именно таких примеров в этом вашем интернете я не нашел.

От себя хочу добавить для всех тех, кто хочет изучать Solidity или просто смотреть как делать такие штучки. Лично мне очень зашел вот этот [канал](https://www.youtube.com/channel/UCJWh7F3AFyQ_x01VKzr9eyA), кучу всего узнал именно оттуда, а не из гайдов и обучалок. 
Когда смотрел вот этот [видос](https://www.youtube.com/watch?v=4a-vutuyTUU), вообще думал ебать что это о_о

P.S: Эксперты Solidity пожалуйста осторожней смотрите на код и не кидайте палками. Я тут первый день и мне ваши external, pure, calldata, memory и др. после питухона вообще еще не запоминаются! Также возможно я где-то говорю полную чушь, если так то поправьте :)