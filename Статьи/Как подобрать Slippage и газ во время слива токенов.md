# Как подобрать Slippage и газ во время слива токенов на Pancake/Uniswap/QuickSwap ..?
- [оригинальный пост](https://t.me/idoresearch/282)

На этот раз рассмотрим вопрос того, как же правильно подобрать Slippage и газ во время слива токенов и уменьшить шанс фейла вашей транзакции.

Итак, когда вы торгуете на DEX’е - вы покупаете и продаете не у других участников, а у пула, в котором лежит ликвидность (токены и их пара). Соответственно, при сливе в этот пул токенов - ваша задачать сделать это a) быстрее всех б) даже если кто-то сделал это быстрее вас, то ваш слиппейдж должен вам позволить слить сразу же после этих ребят. Slippage - это как раз и есть допустимое расхождение цены, на которое вы согласны при свапе, пока ваша транзакция обрабатывается. 

▪️Как устроена механика свапа в дексах: 
Для того, чтобы обработать транзакцию, вы должны выставить газ. Это ваша плата за обработку транзакции майнерам. Но, здесь работает правило, что кто больше платит, того и быстрее обслуживают. Соответственно, если у вас будет стоять 50 газа, а у другого человека 100 - его транзакция обработается быстрее. Следовательно, после того как его транзакция обработается - соотношение в пуле поменяется (в зависимости от того, покупает этот человек или продает) и цена изменится. И когда дело дойдет до обработки вашей транзакции - цена вашей покупки/продажи на которую вы соглашались при нажатии кнопки «SWAP» может быть уже не актуальна и транза сфелится.

И именно для этого вы и проставляете Slippage - он позволяет вам выставить то самое расхождение, на которое вы согласны, если перед вами влетят с большим газом в блок с транзакциями. Объясню. Влетает несколько человек перед вами с большим газом, продают пулу токены и цена меняется на 10%. Но, если ваш слиппейдж был больше 10% - ваша транзакция пройдет, так как вы изначально были готовы на такой сценарий. А если ваш слиппейдж будет 7% - транзакция сфейлится, ведь цена опустилась ниже этого допустимого диапазона.

▪️Как этот риск минимизировать?
Здесь надо подбирать газ и slippage (КЭП). Газ я всегда ставлю х3 от хая на erc-20 и 50-100 на bsc. А как подобрать слип? Надо смотреть на текущую ликвидность в пуле. 

Зачастую, после того как токен залистится - ваши токены с IDO/presale всегда раздают с задержкой в 15-30 мин. И как раз за это время вы можете оценить ликвидность и валотильность цены. Для этого вам всего лишь надо посчитать количество токенов на руках на момент TGE. Это называется Initial supply. Зачастую все проекты пишут это количество в токеномике/группах. И вот когда ликвидность залили, вы заходите на график пукоина/декстулза и смотрите сколько же ликвы щас в пуле (ссылка (https://ibb.co/JHcbGMM)). И соизмеряете количество токенов, которые щас выльются в рынок и количество ликвы, на которые они выльются. И если количества токенов по текущей цене в разы больше, чем ликвидности - стакан сожрут за секунды. Поэтому тут только с большим слипом в 10+%.

▪️Есть еще один способ:
Обычно 25-30% от initial supply летит в стакан в первых блоках, как только открывается клейм. И если, допустим, инишел саплай 5 млн токенов, то следует ожидать порядка 1.25-1.5 миллиона токенов летящих в пул в первые секунды после открытия клейма. И за 1-2 минуты перед клеймом вы можете проставить это количество токенов на панкейке, даже если у вас их нет, и панкейк посчитает вам Price Impact. Это и будет примерное изменение цены, если все эти токены сразу залетят в пул без откупа. Но откуп есть всегда, плюс они все равно будут залетать размазанно в течение 3-10 минут. Поэтому проставляем в графе токенов примерно 25% от инишел саплая, получаем предварительный прайс импакт, режем его в 2.5-3 раза и получаем слиппейдж с которым скорее всего ваша транза пройдет с высоким газом (ссылка (https://ibb.co/FXZdKzL)).

Но повторюсь, эти настройки настолько тонкие, что только опыт позволит вам подобрать подходящие. Играйтесь с ними по этим рекомендациям и надеюсь, что теперь фейлов у вас станет немного меньше. Всем отличного вечера!